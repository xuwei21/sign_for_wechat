<!-- pages/index/index.wxml -->
<view class="container">
  <view class="header">
    <text class="title">打卡记录</text>
  </view>

  <view class="today-section">
    <view class="section-title">今日打卡</view>
    <view class="punch-card">
      <!-- 上班打卡 - 蓝色系 -->
      <view class="punch-item punch-in {{todayRecord.clockInTime ? 'active' : ''}}" bindtap="handleClockIn">
        <text class="punch-label">上班</text>
        <text class="punch-time">{{todayRecord.clockInTime || '--:--'}}</text>
        <text class="punch-status">{{todayRecord.clockInTime ? '已打卡' : '点击打卡'}}</text>
      </view>
      <!-- 下班打卡 - 绿色系 -->
      <view class="punch-item punch-out {{todayRecord.clockOutTime ? 'active' : ''}}" bindtap="handleClockOut">
        <text class="punch-label">下班</text>
        <text class="punch-time">{{todayRecord.clockOutTime || '--:--'}}</text>
        <text class="punch-status">{{todayRecord.clockOutTime ? '已打卡' : '点击打卡'}}</text>
      </view>
    </view>
  </view>

  <view class="history-section">
    <view class="section-title">历史记录</view>
    <view class="cards-container">
      <view class="attendance-card" wx:for="{{records}}" wx:key="_id" wx:if="{{item.date !== todayRecord.date}}">
        <view class="card-header">
          <view class="card-date">{{item.date}} {{item.weekday}}</view>
          <view class="card-duration">{{item.workDuration || '0'}}h</view>
        </view>
        <view class="card-times">
          <view class="time-item">
            <view class="time-label">上班</view>
            <view class="time-value time-in {{item.clockInTime ? 'has-time' : ''}}">{{item.clockInTime || '--:--'}}</view>
          </view>
          <view class="time-item">
            <view class="time-label">下班</view>
            <view class="time-value time-out {{item.clockOutTime ? 'has-time' : ''}}">{{item.clockOutTime || '--:--'}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>